<!doctype html>
<html lang="en">

<head>
    <title>user profile</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <!-- Bootstrap CSS v5.2.1 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />

    <style>

    </style>

    <!-- changing the design -->
    <style>
        #main-content {
            padding: 30px;
            border-radius: 15px;
        }

        #main-content .h5,
        #main-content .text-uppercase {
            font-weight: 600;
            margin-bottom: 0;
        }

        #main-content .h5+div {
            font-size: 0.9rem;
        }

        #main-content .box {
            padding: 10px;
            border-radius: 6px;
            width: 170px;
            height: 90px;
        }

        #main-content .box img {
            width: 40px;
            height: 40px;
            object-fit: contain;
        }

        #main-content .box .tag {
            font-size: 0.9rem;
            color: #000;
            font-weight: 500;
        }

        #main-content .box .number {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .order {
            padding: 10px 30px;
            min-height: 150px;
        }

        .order .order-summary {
            height: 100%;
        }

        .order .blue-label {
            background-color: #aeaeeb;
            color: #0046dd;
            font-size: 0.9rem;
            padding: 0px 3px;
        }

        .order .green-label {
            background-color: #a8e9d0;
            color: #008357;
            font-size: 0.9rem;
            padding: 0px 3px;
        }

        .order .fs-8 {
            font-size: 0.85rem;
        }

        .order .rating img {
            width: 20px;
            height: 20px;
            object-fit: contain;
        }

        .order .rating .fas,
        .order .rating .far {
            font-size: 0.9rem;
        }

        .order .rating .fas {
            color: #daa520;
        }

        .order .status {
            font-weight: 600;
        }

        .order .btn.btn-primary {
            background-color: #fff;
            color: #4e2296;
            border: 1px solid #4e2296;
        }

        .order .btn.btn-primary:hover {
            background-color: #4e2296;
            color: #fff;
        }

        .order .progressbar-track {
            margin-top: 20px;
            margin-bottom: 20px;
            position: relative;
        }

        .order .progressbar-track .progressbar {
            list-style: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding-left: 0rem;
        }

        .order .progressbar-track .progressbar li {
            font-size: 1.5rem;
            border: 1px solid #333;
            padding: 5px 10px;
            border-radius: 50%;
            background-color: #dddddd;
            z-index: 100;
            position: relative;
        }

        .order .progressbar-track .progressbar li.green {
            border: 1px solid #007965;
            background-color: #d5e6e2;
        }

        .order .progressbar-track .progressbar li::after {
            position: absolute;
            font-size: 0.9rem;
            top: 50px;
            left: 0px;
        }

        #tracker {
            position: absolute;
            border-top: 1px solid #bbb;
            width: 100%;
            top: 25px;
        }

        #step-1::after {
            content: 'Placed';
        }

        #step-2::after {
            content: 'Accepted';
            left: -10px;
        }

        #step-3::after {
            content: 'Packed';
        }

        #step-4::after {
            content: 'Shipped';
        }

        #step-5::after {
            content: 'Delivered';
            left: -10px;
        }



        /* Backgrounds */
        .bg-purple {
            background-color: #55009b;
        }

        .bg-light {
            /* background-color: #f0ecec !important; */
            background-color: #ffffff !important;
        }

        .green {
            color: #007965 !important;
        }

        /* Media Queries */
        @media(max-width: 1199.5px) {
            nav ul li {
                padding: 0 10px;
            }
        }

        @media(max-width: 500px) {
            .order .progressbar-track .progressbar li {
                font-size: 1rem;
            }

            .order .progressbar-track .progressbar li::after {
                font-size: 0.8rem;
                top: 35px;
            }

            #tracker {
                top: 20px;
            }
        }

        @media(max-width: 440px) {
            #main-content {
                padding: 20px;
            }

            .order {
                padding: 20px;
            }

            #step-4::after {
                left: -5px;
            }
        }

        @media(max-width: 395px) {
            .order .progressbar-track .progressbar li {
                font-size: 0.8rem;
            }

            .order .progressbar-track .progressbar li::after {
                font-size: 0.7rem;
                top: 35px;
            }

            #tracker {
                top: 15px;
            }

            .order .btn.btn-primary {
                font-size: 0.85rem;
            }
        }

        @media(max-width: 355px) {
            #main-content {
                padding: 15px;
            }

            .order {
                padding: 10px;
            }
        }
    </style>
</head>

<body>
    <header>
        <!-- place navbar here -->
        <%- include('../layouts/header.ejs') %>
    </header>
    <main>

        <section style="background-color: #eee;">
            <div class="container py-5">
                <!-- <div class="row">
                    <div class="col">
                        <nav aria-label="breadcrumb" class="bg-light rounded-3 p-3 mb-4">
                            <ol class="breadcrumb mb-0">
                                <li class="breadcrumb-item"><a href="#">Home</a></li>
                                <li class="breadcrumb-item"><a href="#">User</a></li>
                                <li class="breadcrumb-item active" aria-current="page">User Profile</li>
                            </ol>
                        </nav>
                    </div>
                </div> -->

                <div class="row">
                    <!-- <div class="col-lg-4" style="width:27%">
                        <div class="card mb-4">
                            <div class="card-body d-flex align-items-center">
                                <img src="<%= userData.image ? '/images/userImages/' + userData.image : 'https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3.webp' %>"
                                    alt=" avatar" class="rounded-circle img-fluid"
                                    style="width: 5rem; height: 5rem; margin-right: 1rem;">
                                <h5 class="my-3">
                                    <%= userData.name %>
                                </h5>
                                <div style="margin-left: auto;">
                                    <a href="/userProfile-edit?id=<%= userData._id %>" class="btn btn-primary">Edit</a>
                                </div>
                            </div>
                        </div>
                    </div> -->
                    <div class="col-lg-3">
                        <div class="card mb-4">
                            <div class="card-body text-center">
                                <div class="row align-items-center">
                                    <div class="col-sm-3">
                                        <img src="<%= userData.image ? '/images/userImages/' + userData.image : 'https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-chat/ava3.webp' %>"
                                            alt=" avatar" class="rounded-circle img-fluid"
                                            style="width: 5rem; height: auto; margin-right: 1rem;">
                                    </div>
                                    <div class="col-sm-6">
                                        <h5 class="my-3">
                                            <%= userData.name %>
                                        </h5>
                                    </div>
                                    <div class="col-sm-3">
                                        <div class="d-flex justify-content-end">
                                            <a href="/userProfile-edit?id=<%= userData._id %>"
                                                class="btn btn-primary">Edit</a>
                                        </div>
                                    </div>
                                </div>
                                <div id="sideBox">
                                    <div class="card mt-3">
                                        <ul class="list-group list-group-flush">
                                            <li
                                                class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" width="24"
                                                        height="24" viewBox="0 0 24 24" fill="none"
                                                        stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                                        stroke-linejoin="round"
                                                        class="feather feather-globe mr-2 icon-inline">
                                                        <circle cx="12" cy="12" r="10"></circle>
                                                        <line x1="2" y1="12" x2="22" y2="12"></line>
                                                        <path
                                                            d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z">
                                                        </path>
                                                    </svg><a href="/viewUserOrders"
                                                        style="text-decoration: none;color: black;">Orders</a></h6>

                                            </li>
                                            <li
                                                class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" width="16"
                                                        height="16" fill="currentColor" class="bi bi-wallet"
                                                        viewBox="0 0 16 16">
                                                        <path
                                                            d="M0 3a2 2 0 0 1 2-2h13.5a.5.5 0 0 1 0 1H15v2a1 1 0 0 1 1 1v8.5a1.5 1.5 0 0 1-1.5 1.5h-12A2.5 2.5 0 0 1 0 12.5zm1 1.732V12.5A1.5 1.5 0 0 0 2.5 14h12a.5.5 0 0 0 .5-.5V5H2a2 2 0 0 1-1-.268M1 3a1 1 0 0 0 1 1h12V2H2a1 1 0 0 0-1 1" />
                                                    </svg> <a href="/load-wallet"
                                                        style="text-decoration: none;color: #000;">Wallet</a>
                                                </h6>

                                            </li>
                                            <li
                                                class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" width="16"
                                                        height="16" fill="currentColor" class="bi bi-house"
                                                        viewBox="0 0 16 16">
                                                        <path
                                                            d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z" />
                                                    </svg> <a href="/manageAddress"
                                                        style="text-decoration: none;color: black;">Manage address</a>
                                                </h6>

                                            </li>
                                            <li
                                                class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                                <h6 class="mb-0">
                                                    <p class="" style="cursor: pointer" data-bs-toggle="modal"
                                                        data-bs-target="#mailModal"><svg
                                                            xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                            fill="currentColor" class="bi bi-unlock"
                                                            viewBox="0 0 16 16">
                                                            <path
                                                                d="M11 1a2 2 0 0 0-2 2v4a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h5V3a3 3 0 0 1 6 0v4a.5.5 0 0 1-1 0V3a2 2 0 0 0-2-2M3 8a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1z" />
                                                        </svg>
                                                        reset password
                                                    </p>

                                                </h6>

                                            </li>

                                        </ul>
                                    </div>
                                </div>



                            </div>
                        </div>

                    </div>




                    <div class="col-lg-8">
                        <div class="card mb-4">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0">Full Name
                                        </p>
                                    </div>
                                    <div class="col-sm-9">
                                        <p class="text-muted mb-0">
                                            <%= userData.name %>
                                        </p>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0">Email</p>
                                    </div>
                                    <div class="col-sm-9">
                                        <p class="text-muted mb-0">
                                            <%= userData.email %>
                                        </p>
                                    </div>
                                </div>
                                <hr>


                                <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0">Mobile</p>
                                    </div>
                                    <div class="col-sm-9">
                                        <p class="text-muted mb-0">
                                            <%= userData.mobile %>
                                        </p>
                                    </div>
                                </div>
                                <hr>
                                <!-- <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0">Password</p>
                                    </div>
                                    <div class="col-sm-9">
                                        <p class="text-muted mb-0">
                                            <%= userData.password %>
                                        </p>
                                    </div>
                                </div> -->

                                <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0">Gender</p>
                                    </div>
                                    <div class="col-sm-9">
                                        <p class="text-muted mb-0">
                                            <%= userData.gender ? userData.gender : 'Not specified' %>
                                        </p>
                                    </div>
                                </div>
                                <hr>
                                <!-- <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0">Address</p>
                                    </div>
                                    <div class="col-sm-9">
                                        <p class="text-muted mb-0">
                                            <%= userData.address %>
                                        </p>
                                    </div>
                                </div> -->
                                <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0">Address</p>
                                    </div>
                                    <div class="col-sm-9">
                                        <% if (userData.address && userData.address.length> 0) { %>
                                            <% userData.address.forEach(address=> { %>
                                                <!-- <p class="text-muted mb-0">
                                                    <%= address %>
                                                </p> -->
                                                <div class="card">
                                                    <div class="card-body">🏠<%= address.streetaddress %>, <%=
                                                                address.city %>, <%= address.state %>, <%=
                                                                        address.postalcode %>, <%= address.country %>

                                                    </div>
                                                </div>

                                                <% }); %>
                                                    <% } else { %>
                                                        <p class="text-muted mb-0">No address specified</p>
                                                        <% } %>
                                                            <!-- <a href="/manageAddress">manage address</a> -->
                                    </div>

                                </div>
                                <hr>


                                <!-- <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0">Country</p>
                                    </div>
                                    <div class="col-sm-9">
                                        <p class="text-muted mb-0">
                                            <%= userData.country %>
                                        </p>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0">City</p>
                                    </div>
                                    <div class="col-sm-9">
                                        <p class="text-muted mb-0">
                                            <%= userData.city %>
                                        </p>
                                    </div>
                                </div>
                                <hr>
                                <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0">Zip/postal code</p>
                                    </div>
                                    <div class="col-sm-9">
                                        <p class="text-muted mb-0">
                                            <%= userData.zipCode %>
                                        </p>
                                    </div>
                                </div> -->

                                <div class="row">
                                    <div class="col-sm-3">
                                        <p class="mb-0"><b>user orders</b></p>
                                    </div>
                                    <div class="col-sm-9">
                                        <p class="text-muted mb-0">
                                            <a href="/viewUserOrders">
                                                <i>click here to view orders</i>➡️
                                            </a>
                                        </p>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <!-- <div id="sideBox" style="width: 20%;position: absolute; margin-top: -450px;">
                    <div id="sideBox">
                        <div class="card mt-3">
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                            stroke-linecap="round" stroke-linejoin="round"
                                            class="feather feather-globe mr-2 icon-inline">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <line x1="2" y1="12" x2="22" y2="12"></line>
                                            <path
                                                d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z">
                                            </path>
                                        </svg><a href="/viewUserOrders"
                                            style="text-decoration: none;color: black;">Orders</a></h6>

                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                            fill="currentColor" class="bi bi-wallet" viewBox="0 0 16 16">
                                            <path
                                                d="M0 3a2 2 0 0 1 2-2h13.5a.5.5 0 0 1 0 1H15v2a1 1 0 0 1 1 1v8.5a1.5 1.5 0 0 1-1.5 1.5h-12A2.5 2.5 0 0 1 0 12.5zm1 1.732V12.5A1.5 1.5 0 0 0 2.5 14h12a.5.5 0 0 0 .5-.5V5H2a2 2 0 0 1-1-.268M1 3a1 1 0 0 0 1 1h12V2H2a1 1 0 0 0-1 1" />
                                        </svg> <a href="/load-wallet"
                                            style="text-decoration: none;color: #000;">Wallet</a>
                                    </h6>

                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                            fill="currentColor" class="bi bi-house" viewBox="0 0 16 16">
                                            <path
                                                d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z" />
                                        </svg> <a href="/manageAddress"
                                            style="text-decoration: none;color: black;">Manage address</a>
                                    </h6>

                                </li>
                                <li class="list-group-item d-flex justify-content-between align-items-center flex-wrap">
                                    <h6 class="mb-0"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                            fill="currentColor" class="bi bi-unlock" viewBox="0 0 16 16">
                                            <path
                                                d="M11 1a2 2 0 0 0-2 2v4a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h5V3a3 3 0 0 1 6 0v4a.5.5 0 0 1-1 0V3a2 2 0 0 0-2-2M3 8a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1z" />
                                        </svg>
                                        <p class="" style="cursor: pointer" data-bs-toggle="modal"
                                            data-bs-target="#mailModal">
                                            reset password
                                        </p>

                                    </h6>

                                </li>

                            </ul>
                        </div>
                    </div>
                </div> -->

                <!-- changing the design -->
                <!-- <div class="col-lg-9 my-lg-0 my-1">
                    <div id="main-content" class="bg-grey">

                        <div class="d-flex my-4 flex-wrap">
                            <div class="box me-4 my-1 bg-light">
                                <img src="https://www.freepnglogos.com/uploads/box-png/cardboard-box-brown-vector-graphic-pixabay-2.png"
                                    alt="">
                                <div class="d-flex align-items-center mt-2">
                                    <div class="tag">Orders placed</div>
                                    <div class="ms-auto number">10</div>
                                </div>
                            </div>
                            <div class="box me-4 my-1 bg-light">
                                <img src="https://www.freepnglogos.com/uploads/shopping-cart-png/shopping-cart-campus-recreation-university-nebraska-lincoln-30.png"
                                    alt="">
                                <div class="d-flex align-items-center mt-2">
                                    <div class="tag">Items in Cart</div>
                                    <div class="ms-auto number">10</div>
                                </div>
                            </div>

                        </div>

                    </div>
                </div> -->





            </div>
            </div>
        </section>










        <!-- modal box -->
        <section>
            <div class="modal fade" tabindex="-1" role="dialog" id="mailModal">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content borer-top border-warning">
                        <div class="modal-body text-center">
                            <div class="mt-2 py-2">
                                <h4 class="h5">Reset password</h4>
                            </div>

                            <!-- Password reset form -->
                            <form action="/reset" method="post" class="form" role="form" autocomplete="off">
                                <div class="form-group">
                                    <!-- <label for="inputResetPasswordEmail">Email</label> -->
                                    <div class="col-md-2">
                                        <!-- Email label on the left side -->
                                        <div class="form-group">
                                            <label for="inputResetPasswordEmail">Email</label>
                                        </div>
                                    </div>
                                    <input type="email" class="form-control" name="email" id="email" required=""
                                        style="width: 27rem; margin-left: 1rem;">
                                    <span id="helpResetPasswordEmail" class="form-text small text-muted">
                                        Password reset instructions will be sent to this email address.
                                    </span>
                                </div>
                                <div class="form-group" style="margin-top: 1rem;">
                                    <button type="submit" class="btn btn-primary btn-lg float-right">Reset</button>
                                </div>
                            </form>

                            <!-- /Password reset form -->

                        </div>
                    </div>
                </div>
            </div>

        </section>

    </main>

    <!-- <script>
        function removeOrder(order_id) {

            fetch('/removeOrder', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    order_id,
                }),
            })
                // .then(response => response.json())
                .then(data => {
                    // Handle the response if needed
                    console.log('Received response:', data);
                    // Optionally, update the UI to reflect the removal
                    if (data.success) {
                        // Update the UI to remove the item from the cart
                        const cartItemElement = document.getElementById(`cart-item-${order_id}`);
                        if (cartItemElement) {
                            cartItemElement.remove();
                            console.log('order removed');
                        }
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    // Handle errors if needed
                });
        }
    </script> -->


    <!-- <footer>
        
    <section class="">
        
    <footer class="text-center text-white fixed-bottom" style="background-color: #3891e5;">

     

    
    <div class="text-center p-3" style="background-color: rgba(157, 23, 23, 0.2);">
        © 2020 Copyright:
        <a class="text-white" href="https://mdbootstrap.com/">MDBootstrap.com</a>
    </div>
    
    </footer>
   
    </section>
    </footer> -->
    <footer> <%- include('../layouts/Footer.ejs') %></footer>

    <!-- Bootstrap JavaScript Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>
</body>

</html>